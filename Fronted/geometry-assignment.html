<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BRIGHTLEARN - HELP</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- Left Navigation (Unchanged) -->
        <nav class="left-nav">
            <div class="nav-header">
                <div class="logo-container">
                    <img src="BRIGHTLEARN.jpg" alt="BRIGHTLEARN" class="logo">
                </div>
            </div>
            
            <ul class="nav-links">
                <li>
                    <a href="index.html">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>DASHBOARD</span>
                    </a>
                </li>
                <li>
                    <a href="courses.html" class="active">
                        <i class="fas fa-book-open"></i>
                        <span>COURSES</span>
                    </a>
                </li>
                <li>
                  <a href="grades.html">
                      <i class="fas fa-graduation-cap"></i>
                      <span>GRADES</span>
                  </a>
              </li>
                <li>
                    <a href="history.html">
                        <i class="fas fa-history"></i>
                        <span>HISTORY</span>
                    </a>
                </li>
                <li>
                    <a href="help.html">
                        <i class="fas fa-question-circle"></i>
                        <span>HELP</span>
                    </a>
                </li>
            </ul>
            
            <div class="logout-container">
                <a href="logout.html" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>LOGOUT</span>
                </a>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Bar (Unchanged) -->
            <header class="top-bar">
                <div class="top-icons">
                    <div class="search-container">
                        <input type="text" placeholder="Search..." class="search-input">
                        <i class="fas fa-search search-icon"></i>
                    </div>
                    
                    <div class="notification-dropdown">
                        <i class="fas fa-bell notification-icon"></i>
                        <span class="notification-badge">3</span>
                        <div class="dropdown-content">
                            <div class="notification-header">
                                <h4>Notifications</h4>
                                <button class="mark-all-read">Mark all as read</button>
                            </div>
                            <div class="notification-list">
                                <div class="notification-item unread">
                                    <div class="notification-icon"><i class="fas fa-book"></i></div>
                                    <div class="notification-content">
                                        <p>New assignment posted in Algebra II</p>
                                        <span class="notification-time">2 hours ago</span>
                                    </div>
                                </div>
                                <div class="notification-item">
                                    <div class="notification-icon"><i class="fas fa-check-circle"></i></div>
                                    <div class="notification-content">
                                        <p>Your submission for Essay Writing was graded</p>
                                        <span class="notification-time">1 day ago</span>
                                    </div>
                                </div>
                            </div>
                            <a href="#" class="view-all">View All Notifications</a>
                        </div>
                    </div>
                    
                    <div class="profile-dropdown">
                        <i class="fas fa-user-circle profile-icon"></i>
                        <div class="dropdown-content">
                            <div class="profile-header">
                                <img src="default-profile.jpg" alt="Profile" class="profile-pic">
                                <div class="profile-info">
                                    <h4>Jordan Barker</h4>
                                    <p>Student</p>
                                </div>
                            </div>
                            <div class="profile-stats">
                                <div class="stat-item">
                                    <span>Courses</span>
                                    <span>5</span>
                                </div>
                                <div class="stat-item">
                                    <span>Completed</span>
                                    <span>32%</span>
                                </div>
                            </div>
                            <div class="dropdown-links">
                                <a href="profile.html" class="profile-link"><i class="fas fa-user"></i> View Profile</a>
                                <a href="settings.html" class="profile-link"><i class="fas fa-cog"></i> Settings</a>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
        <main class="main-content">
          <div class="breadcrumbs">
            <a href="index.html">Home</a> > <a href="courses.html">Courses</a> > <a href="math.html">Mathematics</a> > <a href="geometry-assignment.html">Geometry Assignment</a>
        </div>
            <div class="course-header geometry">
                <h1><i class="fas fa-shapes"></i> Geometry Assignment Quiz</h1>
            </div>
            
            <!-- Progress Section -->
            <div class="progress-container">
                <div class="progress-header">
                    <h3>Your Progress</h3>
                    <div class="progress-text" id="progress-text">0% (0/3 levels completed)</div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
            </div>
            
            <!-- Level Selector -->
            <select id="level-selector" class="level-selector">
                <option value="">Select a level</option>
            </select>
            
            <!-- Quiz Container -->
            <div id="quiz-container"></div>
        </main>
    </div>
    <script>
      // Quiz data with multiple levels
      const geometryQuizData = {
        levels: [
          {
            level: 1,
            name: "Basic Concepts",
            description: "Points, Lines, and Planes",
            questions: [
              {
                question: "Which of these best describes a point?",
                options: [
                  "A straight path that extends infinitely",
                  "A location in space with no size",
                  "A flat, two-dimensional surface",
                  "A three-dimensional object"
                ],
                answer: 1
              },
              {
                question: "How many points determine a unique line?",
                options: [
                  "1",
                  "2",
                  "3",
                  "4"
                ],
                answer: 1
              }
            ]
          },
          {
            level: 2,
            name: "Angles",
            description: "Types and Properties of Angles",
            questions: [
              {
                question: "What is the complement of a 35° angle?",
                options: [
                  "35°",
                  "55°",
                  "145°",
                  "325°"
                ],
                answer: 1
              },
              {
                question: "An angle measuring 91° is classified as:",
                options: [
                  "Acute",
                  "Right",
                  "Obtuse",
                  "Straight"
                ],
                answer: 2
              }
            ]
          },
          {
            level: 3,
            name: "Triangles",
            description: "Properties and Types of Triangles",
            questions: [
              {
                question: "What is the third angle of a triangle with angles 45° and 45°?",
                options: [
                  "45°",
                  "90°",
                  "100°",
                  "180°"
                ],
                answer: 1
              },
              {
                question: "A triangle with all sides equal is called:",
                options: [
                  "Isosceles",
                  "Scalene",
                  "Equilateral",
                  "Right"
                ],
                answer: 2
              }
            ]
          }
        ]
      };

      // DOM elements
      const levelSelector = document.getElementById('level-selector');
      const quizContainer = document.getElementById('quiz-container');
      const progressFill = document.getElementById('progress-fill');
      const progressText = document.getElementById('progress-text');

      // State management
      let currentLevel = null;
      let completedLevels = JSON.parse(localStorage.getItem('completedGeometryLevels')) || [];
      let answeredQuestions = JSON.parse(localStorage.getItem('answeredQuestions')) || {};

      // Initialize the level selector
      function initLevelSelector() {
        geometryQuizData.levels.forEach(level => {
          const option = document.createElement('option');
          option.value = level.level;
          option.textContent = `Level ${level.level}: ${level.name} - ${level.description}`;
          levelSelector.appendChild(option);
        });
      }

      // Update progress display
      function updateProgress() {
        const totalQuestions = geometryQuizData.levels.reduce((total, level) => total + level.questions.length, 0);
        let answeredCount = 0;
        
        // Count all answered questions across all levels
        for (const level of geometryQuizData.levels) {
          if (answeredQuestions[level.level]) {
            answeredCount += Object.keys(answeredQuestions[level.level]).length;
          }
        }
        
        const percent = Math.round((answeredCount / totalQuestions) * 100);
        
        progressFill.style.width = `${percent}%`;
        progressText.textContent = `${percent}% (${answeredCount}/${totalQuestions} questions answered)`;
      }

      // Render quiz for a specific level
      function renderQuiz(levelNum) {
        const level = geometryQuizData.levels.find(l => l.level == levelNum);
        if (!level) {
          quizContainer.innerHTML = '<p>Please select a level to begin.</p>';
          return;
        }

        currentLevel = levelNum;
        let currentQuestion = 0;
        
        // Initialize answered questions for this level if not exists
        if (!answeredQuestions[levelNum]) {
          answeredQuestions[levelNum] = {};
        }
        
        let userAnswers = level.questions.map((q, i) => 
          answeredQuestions[levelNum][i] !== undefined ? answeredQuestions[levelNum][i] : null
        );

        function showQuestion(idx) {
          const q = level.questions[idx];
          quizContainer.innerHTML = `
            <div class="bl-quiz-q">${q.question}</div>
            <div class="bl-quiz-options">
              ${q.options.map((opt, i) => `
                <label>
                  <input type="radio" name="option" value="${i}" ${userAnswers[idx] === i ? 'checked' : ''}>
                  ${opt}
                </label>
              `).join('')}
            </div>
            <div class="bl-quiz-nav">
              <button id="prevQ" ${idx === 0 ? 'disabled' : ''}>Previous</button>
              <button id="nextQ">${idx === level.questions.length - 1 ? 'Finish' : 'Next'}</button>
            </div>
          `;

          document.querySelectorAll('input[name="option"]').forEach(input => {
            input.addEventListener('change', e => {
              userAnswers[idx] = parseInt(e.target.value);
              // Save the answer immediately
              answeredQuestions[levelNum][idx] = parseInt(e.target.value);
              localStorage.setItem('answeredQuestions', JSON.stringify(answeredQuestions));
              updateProgress();
            });
          });

          document.getElementById('prevQ').onclick = () => {
            if (currentQuestion > 0) {
              currentQuestion--;
              showQuestion(currentQuestion);
            }
          };

          document.getElementById('nextQ').onclick = () => {
            if (currentQuestion < level.questions.length - 1) {
              currentQuestion++;
              showQuestion(currentQuestion);
            } else {
              finishQuiz();
            }
          };
        }

        function finishQuiz() {
          let correct = 0;
          level.questions.forEach((q, i) => {
            if (userAnswers[i] === q.answer) correct++;
          });

          // Mark level as completed if all questions answered
          if (userAnswers.every(answer => answer !== null) && !completedLevels.includes(levelNum)) {
            completedLevels.push(levelNum);
            localStorage.setItem('completedGeometryLevels', JSON.stringify(completedLevels));
          }

          const percent = Math.round((correct / level.questions.length) * 100);
          quizContainer.innerHTML = `
            <div class="bl-quiz-result">You scored ${percent}% (${correct} out of ${level.questions.length})</div>
            <button id="retryQuiz">Retry</button>
          `;

          document.getElementById('retryQuiz').onclick = () => {
            // Clear answers for this level when retrying
            answeredQuestions[levelNum] = {};
            localStorage.setItem('answeredQuestions', JSON.stringify(answeredQuestions));
            userAnswers = Array(level.questions.length).fill(null);
            currentQuestion = 0;
            showQuestion(currentQuestion);
            updateProgress();
          };
        }

        showQuestion(currentQuestion);
      }

      // Level selector change handler
      levelSelector.addEventListener('change', function() {
        const levelNum = this.value;
        renderQuiz(levelNum);
      });

      // Initialize the page
      document.addEventListener('DOMContentLoaded', function() {
        initLevelSelector();
        updateProgress();
        renderQuiz('');
      });
    </script>
</body>
</html>
