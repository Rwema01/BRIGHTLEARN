<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BRIGHTLEARN - Algebra Quiz</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- Left Navigation -->
        <nav class="left-nav">
            <div class="nav-header">
                <div class="logo-container">
                    <img src="BRIGHTLEARN.jpg" alt="BRIGHTLEARN" class="logo">
                </div>
            </div>
            
            <ul class="nav-links">
                <li>
                    <a href="index.html">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>DASHBOARD</span>
                    </a>
                </li>
                <li>
                    <a href="courses.html" class="active">
                        <i class="fas fa-book-open"></i>
                        <span>COURSES</span>
                    </a>
                </li>
                <li>
                    <a href="grades.html">
                        <i class="fas fa-graduation-cap"></i>
                        <span>GRADES</span>
                    </a>
                </li>
                <li>
                    <a href="history.html">
                        <i class="fas fa-history"></i>
                        <span>HISTORY</span>
                    </a>
                </li>
                <li>
                  <a href="settings.html">
                      <i class="fas fa-cog"></i>
                      <span>SETTINGS</span>
                  </a>
              </li>
                <li>
                    <a href="help.html">
                        <i class="fas fa-question-circle"></i>
                        <span>HELP</span>
                    </a>
                </li>
            </ul>
            
            <div class="logout-container">
                <a href="logout.html" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>LOGOUT</span>
                </a>
            </div>
        </nav>

       <!-- Main Content -->
       <main class="main-content">
        <!-- Top Bar -->
        <header class="top-bar">
            <div class="top-icons">
               
                
                <!-- Simple Notification Link -->
                <a href="notifications.html" class="notification-link">
                    <i class="fas fa-bell notification-icon"></i>
                </a>
                
                <!-- Simple Profile Link -->
                <a href="profile.html" class="profile-link">
                    <i class="fas fa-user-circle profile-icon"></i>
                </a>
            </div>
        </header>

            <!-- Quiz Content with Updated Breadcrumbs Structure -->
            <div class="dashboard-content">
                <!-- Welcome Section with Breadcrumbs -->
                <div class="welcome-section">
                    <div class="breadcrumbs">
                        <a href="index.html">Home</a> > <a href="courses.html">Courses</a> > <a href="math.html">Mathematics</a> > <a href="algebra-quiz.html">Algebra Quiz</a>
                    </div>
                    <h1><i class="fas fa-square-root-alt"></i> <span class="student-name">ALGEBRA QUIZ</span></h1>
                </div>

                <!-- Quiz System Container -->
                <div id="quiz-system">
                    <div class="level-indicator">
                        <span id="current-level">Level 1: Basic Equations</span>
                        <span id="level-score">Score: 0%</span>
                    </div>
                    
                    <div class="progress-container">
                        <div class="global-progress">
                            <div class="progress-header">
                                <span>Overall Progress</span>
                                <span id="global-progress-text">0/20 questions</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="global-progress-bar"></div>
                            </div>
                        </div>
                        
                        <div class="level-progress">
                            <div class="progress-header">
                                <span>Level Progress</span>
                                <span id="level-progress-text">0/5 questions</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="level-progress-bar"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="score-display">
                        <div class="level-score" id="current-level-score">Current Level: 0%</div>
                        <div class="level-score" id="overall-score">Overall Score: 0%</div>
                    </div>
                    
                    <div id="question-container"></div>
                    <div class="bl-quiz-options" id="options-container"></div>
                    <div class="bl-quiz-nav">
                        <button id="prev-btn" disabled>Previous</button>
                        <button id="next-btn">Next</button>
                    </div>
                    <div class="bl-quiz-result" id="result-container" style="display: none;"></div>
                    <button id="retryQuiz" style="display: none;">Retry Quiz</button>
                </div>
            </div>
        </main>
    </div>

    <script>
      // Structured quiz data with levels
      const quizData = {
        title: "Algebra Mastery Quiz",
        levels: [
          {
            name: "Basic Equations",
            description: "Solve simple linear equations",
            questions: [
              {
                question: "1. What is the solution to the equation: 2x + 5 = 15?",
                options: ["x = 5", "x = 7.5", "x = 10", "x = 20"],
                answer: 0
              },
              {
                question: "2. Solve for y: 3y - 7 = 8",
                options: ["y = 1", "y = 5", "y = 15", "y = 45"],
                answer: 1
              },
              {
                question: "3. Solve for x: x/2 + 3 = 7",
                options: ["x = 2", "x = 4", "x = 8", "x = 20"],
                answer: 2
              },
              {
                question: "4. Solve: 4(x - 3) = 20",
                options: ["x = 2", "x = 5", "x = 8", "x = 12"],
                answer: 2
              },
              {
                question: "5. Solve: 5 - 2x = 11",
                options: ["x = 3", "x = -3", "x = 8", "x = -8"],
                answer: 1
              }
            ]
          },
          {
            name: "Polynomial Operations",
            description: "Work with polynomials and factoring",
            questions: [
              {
                question: "6. Simplify: (3x²)(4x³)",
                options: ["7x⁵", "12x⁵", "12x⁶", "7x⁶"],
                answer: 1
              },
              {
                question: "7. Factor completely: x² - 9",
                options: ["(x-3)(x-3)", "(x+3)(x+3)", "(x-3)(x+3)", "Cannot be factored"],
                answer: 2
              },
              {
                question: "8. Expand: (x + 3)(x - 2)",
                options: ["x² + x - 6", "x² + 5x - 6", "x² - x - 6", "x² - 5x - 6"],
                answer: 0
              },
              {
                question: "9. Factor: 2x² + 7x + 3",
                options: ["(2x+1)(x+3)", "(2x+3)(x+1)", "(x+1)(2x+3)", "Cannot be factored"],
                answer: 1
              },
              {
                question: "10. Simplify: (x² - 4)/(x - 2)",
                options: ["x - 2", "x + 2", "x² + 2", "Cannot be simplified"],
                answer: 1
              }
            ]
          }
        ]
      };

      // Quiz State
      let currentLevel = 0;
      let currentQuestionIndex = 0;
      let userAnswers = [];
      let levelScores = [];
      let totalCorrect = 0;
      
      // Initialize userAnswers and levelScores arrays
      quizData.levels.forEach(level => {
        userAnswers.push(Array(level.questions.length).fill(null));
        levelScores.push(0);
      });

      // DOM Elements
      const questionContainer = document.getElementById('question-container');
      const optionsContainer = document.getElementById('options-container');
      const prevBtn = document.getElementById('prev-btn');
      const nextBtn = document.getElementById('next-btn');
      const resultContainer = document.getElementById('result-container');
      const retryBtn = document.getElementById('retryQuiz');
      const currentLevelDisplay = document.getElementById('current-level');
      const levelScoreDisplay = document.getElementById('level-score');
      const currentLevelScoreDisplay = document.getElementById('current-level-score');
      const overallScoreDisplay = document.getElementById('overall-score');
      
      // Progress Bars
      const globalProgressBar = document.getElementById('global-progress-bar');
      const globalProgressText = document.getElementById('global-progress-text');
      const levelProgressBar = document.getElementById('level-progress-bar');
      const levelProgressText = document.getElementById('level-progress-text');

      // Initialize Quiz
      function initQuiz() {
        currentLevel = 0;
        currentQuestionIndex = 0;
        userAnswers = [];
        levelScores = [];
        totalCorrect = 0;
        
        quizData.levels.forEach(level => {
          userAnswers.push(Array(level.questions.length).fill(null));
          levelScores.push(0);
        });
        
        updateLevelDisplay();
        updateProgress();
        showQuestion();
        resultContainer.style.display = 'none';
        retryBtn.style.display = 'none';
      }

      // Show current question
      function showQuestion() {
        const question = quizData.levels[currentLevel].questions[currentQuestionIndex];
        questionContainer.innerHTML = `<div class="bl-quiz-q">${question.question}</div>`;
        
        optionsContainer.innerHTML = '';
        question.options.forEach((option, index) => {
          const optionElement = document.createElement('label');
          optionElement.innerHTML = `
            <input type="radio" name="answer" value="${index}" ${userAnswers[currentLevel][currentQuestionIndex] === index ? 'checked' : ''}>
            ${option}
          `;
          optionElement.addEventListener('change', () => {
            userAnswers[currentLevel][currentQuestionIndex] = parseInt(optionElement.querySelector('input').value);
            updateScores();
            updateProgress();
          });
          optionsContainer.appendChild(optionElement);
        });

        // Update button states
        prevBtn.disabled = currentQuestionIndex === 0 && currentLevel === 0;
        nextBtn.textContent = isLastQuestion() ? 'Complete Level' : 'Next';
      }

      // Check if current question is the last in the level
      function isLastQuestion() {
        return currentQuestionIndex === quizData.levels[currentLevel].questions.length - 1;
      }

      // Check if current level is the last level
      function isLastLevel() {
        return currentLevel === quizData.levels.length - 1;
      }

      // Update level information display
      function updateLevelDisplay() {
        const level = quizData.levels[currentLevel];
        currentLevelDisplay.textContent = `Level ${currentLevel + 1}: ${level.name}`;
        levelScoreDisplay.textContent = `Score: ${levelScores[currentLevel]}%`;
      }

      // Update progress bars and text
      function updateProgress() {
        // Calculate global progress
        const totalQuestions = quizData.levels.reduce((sum, level) => sum + level.questions.length, 0);
        const answeredQuestions = userAnswers.flat().filter(answer => answer !== null).length;
        const globalProgressPercent = (answeredQuestions / totalQuestions) * 100;
        
        globalProgressBar.style.width = `${globalProgressPercent}%`;
        globalProgressText.textContent = `${answeredQuestions}/${totalQuestions} questions`;
        
        // Calculate level progress
        const levelQuestions = quizData.levels[currentLevel].questions.length;
        const levelAnswered = userAnswers[currentLevel].filter(answer => answer !== null).length;
        const levelProgressPercent = (levelAnswered / levelQuestions) * 100;
        
        levelProgressBar.style.width = `${levelProgressPercent}%`;
        levelProgressText.textContent = `${levelAnswered}/${levelQuestions} questions`;
      }

      // Calculate and update scores
      function updateScores() {
        // Calculate current level score
        const currentLevelQuestions = quizData.levels[currentLevel].questions;
        const correctInLevel = userAnswers[currentLevel].filter((answer, index) => 
          answer === currentLevelQuestions[index].answer
        ).length;
        
        levelScores[currentLevel] = Math.round((correctInLevel / currentLevelQuestions.length) * 100);
        levelScoreDisplay.textContent = `Score: ${levelScores[currentLevel]}%`;
        currentLevelScoreDisplay.textContent = `Current Level: ${levelScores[currentLevel]}%`;
        
        // Calculate overall score
        totalCorrect = userAnswers.flatMap((levelAnswers, levelIndex) => 
          levelAnswers.filter((answer, index) => 
            answer === quizData.levels[levelIndex].questions[index].answer
          )
        ).length;
        
        const totalQuestions = quizData.levels.reduce((sum, level) => sum + level.questions.length, 0);
        const overallScore = Math.round((totalCorrect / totalQuestions) * 100);
        
        overallScoreDisplay.textContent = `Overall Score: ${overallScore}%`;
      }

      // Show level completion screen
      function showLevelCompletion() {
        const levelScore = levelScores[currentLevel];
        questionContainer.innerHTML = `
          <div class="bl-quiz-q">Level ${currentLevel + 1} Complete!</div>
          <p>You scored ${levelScore}% in this level.</p>
          <p>${levelScore >= 80 ? 'Excellent work!' : levelScore >= 60 ? 'Good job!' : 'Keep practicing!'}</p>
        `;
        optionsContainer.innerHTML = '';
        
        if (isLastLevel()) {
          nextBtn.textContent = 'View Final Results';
        } else {
          nextBtn.textContent = 'Continue to Next Level';
        }
      }

      // Show final results
      function showFinalResults() {
        const totalQuestions = quizData.levels.reduce((sum, level) => sum + level.questions.length, 0);
        const overallScore = Math.round((totalCorrect / totalQuestions) * 100);
        
        // Generate level breakdown
        let levelBreakdown = '';
        quizData.levels.forEach((level, index) => {
          levelBreakdown += `
            <p>Level ${index + 1}: ${levelScores[index]}%</p>
          `;
        });
        
        resultContainer.innerHTML = `
          <p>Quiz Completed!</p>
          <p>Final Score: ${totalCorrect}/${totalQuestions} (${overallScore}%)</p>
          <div class="level-breakdown">
            <p><strong>Level Breakdown:</strong></p>
            ${levelBreakdown}
          </div>
          <p>${overallScore >= 80 ? 'Congratulations! You mastered algebra!' : 
             overallScore >= 60 ? 'Good work! Keep practicing to improve!' : 
             'Review the material and try again!'}</p>
        `;
        resultContainer.style.display = 'block';
        retryBtn.style.display = 'block';
        
        // Hide question and navigation
        questionContainer.style.display = 'none';
        optionsContainer.style.display = 'none';
        document.querySelector('.bl-quiz-nav').style.display = 'none';
      }

      // Event Listeners
      prevBtn.addEventListener('click', () => {
        if (currentQuestionIndex > 0) {
          currentQuestionIndex--;
        } else if (currentLevel > 0) {
          currentLevel--;
          currentQuestionIndex = quizData.levels[currentLevel].questions.length - 1;
        }
        showQuestion();
        updateProgress();
      });

      nextBtn.addEventListener('click', () => {
        if (!isLastQuestion()) {
          currentQuestionIndex++;
          showQuestion();
        } else {
          if (isLastLevel()) {
            showFinalResults();
          } else {
            currentLevel++;
            currentQuestionIndex = 0;
            updateLevelDisplay();
            showQuestion();
          }
        }
        updateProgress();
      });

      retryBtn.addEventListener('click', () => {
        window.location.href = "algebra-quiz.html"; // Redirects to the quiz page
      });

      // Start the quiz
      initQuiz();
    </script>
</body>
</html>
